# AIstoic - サンダー対メタグロス特化計算機

## プロジェクト概要
ポケモン第三世代（ルビー・サファイア・エメラルド・FRLG）の対戦環境において、サンダー対メタグロスの1対1対戦におけるサンダー側の勝率を算出するツールです。

## 技術スタック
- Vite + React + TypeScript
- Tailwind CSS (@tailwindcss/vite)
- Vitest（テストフレームワーク）
- GitHub Pages（デプロイ先）

## 開発ルール

### コーディング規約
- **`any`型は使用禁止**
- **`as`による型アサーションは使用禁止**（型安全性を損なうため）
- **`useEffect`は使用禁止**（殆どの場合不要で、コードが難解になるため）
- 関数定義は`const fn = () => {}`形式を使用
- 変数は`const`を優先的に使用
- インポートは`@/`エイリアスを使用
- セミコロンなし（Prettierで自動フォーマット）
- シングルクォート使用

### Reactベストプラクティス
1. **レンダリング時の副作用禁止**
   - コンポーネントのレンダリング中に関数を呼び出さない
   - stateの更新はイベントハンドラー内でのみ行う

2. **単方向データフロー**
   - 親から子へpropsでデータを渡す
   - 子から親へはコールバック関数で通知
   - refの使用は最小限に抑える

3. **制御されたコンポーネント**
   - フォーム要素は常にReactのstateで制御する
   - useEffectを使わずに値の同期を行う

4. **パフォーマンス最適化**
   - 定数はコンポーネント外部で定義
   - 重い計算は必要に応じてuseMemoを使用
   - コールバックは必要に応じてuseCallbackを使用

5. **keyプロパティ**
   - リストアイテムには一意で安定したkeyを使用
   - インデックスをkeyとして使用しない

6. **DOM操作**
   - 直接的なDOM操作は避ける
   - setTimeoutでのDOM操作は使用しない
   - Reactのイベントハンドラー内で処理する

### プロジェクト構成
```
src/
├── components/     # UIコンポーネント
├── hooks/         # カスタムフック
├── utils/         # ユーティリティ関数
├── types/         # 型定義
├── constants/     # 定数定義
└── test/          # テスト関連
```

### コマンド
- `npm run dev` - 開発サーバー起動
- `npm run build` - ビルド
- `npm run test` - テスト実行
- `npm run lint` - ESLint実行
- `npm run format` - Prettierでフォーマット

### 開発フロー
コード変更後は必ず以下のコマンドを実行して品質を確認すること：

1. **lintチェック**
   ```bash
   npm run lint
   ```
   - Biomeによるコード品質チェック
   - エラーが0件であることを確認

2. **テスト実行**
   ```bash
   npm run test
   ```
   - すべてのテストが通過することを確認

3. **動作確認**
   ```bash
   npm run dev
   ```
   - 開発用サーバーを起動
   - Playwright MCPを使用してブラウザで実際の動作を確認
   - UI/UXが期待通りに動作することを確認

4. **フォーマット（必要に応じて）**
   ```bash
   npm run format
   ```
   - コードスタイルの統一

**注意**: 上記の品質チェックをすべてパスしてからコミットすること。

### 重要な仕様
- ダメージ計算は第三世代の仕様に準拠
- モンテカルロシミュレーション（10,000回）で勝率を算出
- 詳細な仕様は`仕様書.md`を参照

### GitHub Pages デプロイ
ビルド後、`dist`ディレクトリの内容をGitHub Pagesにデプロイします。